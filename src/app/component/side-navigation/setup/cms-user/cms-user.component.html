<div class="row">
  <div class="col-12">
    <div class="bottom-conatiner">
      <div class="row">
        <div class="col-5 ps-4">
          <div class="row mt-4 ps-2">
            <div
              class="col-3 ps-0"
              *ngFor="let res_sub of subtab; let j = index"
              (click)="NavigateToSubTab(j)"
            >
              <div
                class="sub_tab font d-flex justify-content-center align-items-center"
                [ngClass]="{ 'sub-tab-active': j === activeIndexSubTab }"
              >
                {{ res_sub.label }}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row w-100">
        <div class="col-12 ms-2 d-flex justify-content-center">
          <div class="table-container">
            <form
              [formGroup]="createCmsUser"
              (ngSubmit)="createCmsUserOnSubmit()"
            >
              <div class="row py-0" *ngIf="activeIndexSubTab == 0">
                <div class="row pt-3">
                  <div class="col-4">
                    <div class="col-12">
                      <div class="label_setup-logo font">Organization:</div>
                      <div
                        ngbDropdown
                        class="dropdown mt-2 w-100 custom-dropdown"
                        style="position: relative; display: inline-flex"
                      >
                        <div
                          *ngIf="user?.key1; then noDropdown; else dropdown"
                        ></div>
                        <ng-template #noDropdown>
                          <button
                            ngbDropdownToggle
                            class="btn btn-secondary font large-dropdown"
                            type="button"
                            id="dropdownMenuButtonsetup"
                            aria-expanded="false"
                            [ngStyle]="{
                              color:
                                selectedDropdownIndustryValue !==
                                'Select from the drop-down'
                                  ? 'black'
                                  : ''
                            }"
                          >
                            {{ selectedDropdownIndustryValue }}
                          </button>
                        </ng-template>
                        <ng-template #dropdown>
                          <button
                            ngbDropdownToggle
                            class="btn btn-secondary font large-dropdown"
                            type="button"
                            id="dropdownMenuButtonsetup"
                            aria-expanded="false"
                            [ngStyle]="{
                              color:
                                selectedDropdownIndustryValue !==
                                'Select from the drop-down'
                                  ? 'black'
                                  : ''
                            }"
                            (click)="getOrganization()"
                          >
                            {{ selectedDropdownIndustryValue }}
                          </button>
                          <ul
                            ngbDropdownMenu
                            aria-labelledby="dropdownMenuButton1"
                            class="w-100 custom-dropdown-menu"
                          >
                            <li
                              *ngFor="
                                let res of getOrganizationlist;
                                let index = index
                              "
                            >
                              <a
                                ngbDropdownItem
                                (click)="selectedIndustryValue(index)"
                                class="font"
                              >
                                {{ res.organizationName }}</a
                              >
                            </li>
                          </ul>
                        </ng-template>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="col-12">
                      <div class="label_setup-logo font">Role:</div>
                      <div
                        ngbDropdown
                        class="dropdown mt-2 w-100 custom-dropdown"
                        style="position: relative; display: inline-flex"
                      >
                        <button
                          ngbDropdownToggle
                          class="btn btn-secondary font large-dropdown"
                          type="button"
                          id="dropdownMenuButtonsetup"
                          aria-expanded="false"
                          [ngStyle]="{
                            color:
                              selectedDropdownRoleValue !==
                              'Select from the drop-down'
                                ? 'black'
                                : ''
                          }"
                          (click)="GetRoleTypesList()"
                        >
                          {{ selectedDropdownRoleValue }}
                        </button>
                        <ul
                          ngbDropdownMenu
                          aria-labelledby="dropdownMenuButton1"
                          class="w-100 custom-dropdown-menu"
                        >
                          <li *ngFor="let res of CmsRole; let index = index">
                            <a
                              ngbDropdownItem
                              (click)="selectedRoleValue(index)"
                              class="font"
                            >
                              {{ res.roleName }}
                            </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  *ngIf="
                    selectedDropdownRoleId < 4;
                    then VendorDropdown;
                    else StageDropdown
                  "
                ></div>
                <ng-template #VendorDropdown>
                  <div class="row" *ngIf="divVisible">
                    <div class="col-6">
                      <div class="col-12">
                        <div class="label_setup-logo font mt-2">Vendor:</div>
                        <div
                          ngbDropdown
                          class="dropdown mt-2 w-100 custom-dropdown"
                          style="position: relative; display: inline-flex"
                        >
                          <button
                            ngbDropdownToggle
                            class="btn btn-secondary font large-dropdown"
                            type="button"
                            id="dropdownMenuButtonsetup"
                            aria-expanded="false"
                            [ngStyle]="{
                              color:
                                selectedDropdownVendorValue !==
                                'Select from the drop-down'
                                  ? 'black'
                                  : ''
                            }"
                            (click)="getVendorDetails()"
                          >
                            {{ selectedDropdownVendorValue }}
                          </button>
                          <ul
                            ngbDropdownMenu
                            aria-labelledby="dropdownMenuButton1"
                            class="w-100 custom-dropdown-menu"
                          >
                            <li
                              *ngFor="
                                let res of vendorDetailsResponse;
                                let index = index
                              "
                            >
                              <a
                                ngbDropdownItem
                                (click)="selectedVendorValue(index)"
                                class="font"
                              >
                                {{ res?.hierarchyName }}
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-template>
                <ng-template #StageDropdown>
                  <div class="row" *ngIf="divVisible">
                    <div class="col-6">
                      <div class="col-12">
                        <div class="label_setup-logo font mt-2">Stage:</div>
                        <div
                          ngbDropdown
                          class="dropdown mt-2 w-100 custom-dropdown"
                        >
                          <button
                            ngbDropdownToggle
                            class="btn btn-secondary font large-dropdown"
                            type="button"
                            id="dropdownMenuButtonsetup"
                            aria-expanded="false"
                            [ngStyle]="{
                              color:
                                selectedDropdownVendorValue !==
                                'Select from the drop-down'
                                  ? 'black'
                                  : ''
                            }"
                            (click)="GetStage()"
                          >
                            {{ selectedDropdownVendorValue }}
                          </button>
                          <ul
                            ngbDropdownMenu
                            aria-labelledby="dropdownMenuButton1"
                            class="w-100 custom-dropdown-menu"
                          >
                            <li
                              *ngFor="
                                let res of stageResponse;
                                let index = index
                              "
                            >
                              <a
                                ngbDropdownItem
                                (click)="selectedStageValue(index)"
                                class="font"
                                >{{ res?.hierarchyName }}</a
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-template>

                <div class="row">
                  <div class="col-4">
                    <div class="col-12 mt-3">
                      <div class="label_setup-logo font">User Name:</div>
                      <div class="mt-2">
                        <input
                          class="form-control organisation_input font"
                          type="text"
                          id="employeeUserName"
                          name="employeeUserName"
                          formControlName="employeeUserName"
                        />
                      </div>
                    </div>
                    <div class="col-12 mt-2">
                      <div class="label_setup-logo font">Employee Name:</div>
                      <div class="mt-2">
                        <input
                          class="form-control organisation_input font"
                          type="text"
                          id="employeeName"
                          name="employeeName"
                          formControlName="employeeName"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="col-12 mt-3">
                      <div class="label_setup-logo font">Password:</div>
                      <div class="mt-2 password-input">
                        <input
                          class="form-control organisation_input font"
                          [type]="showPassword ? 'text' : 'password'"
                          id="empPassword"
                          name="empPassword"
                          formControlName="empPassword"
                          (input)="updateInputState($event)"
                        />
                        <div class="input-group-append mt-1">
                          <div
                            class="eye-button d-flex justify-content-center align-items-center"
                            (click)="togglePasswordVisibility()"
                          >
                            <i
                              class="material-icons me-2"
                              style="color: #133870"
                              >{{
                                showPassword ? "visibility" : "visibility_off"
                              }}</i
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-12 mt-2">
                      <div class="label_setup-logo font">Employee Id:</div>
                      <div class="mt-2">
                        <input
                          class="form-control organisation_input font"
                          type="text"
                          id="empId"
                          name="empId"
                          formControlName="empId"
                          (input)="updateInputState($event)"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
            <div class="row py-0" *ngIf="activeIndexSubTab == 1">
              <div class="col-12">
                <div class="row display-Cms-User-Header">
                  <div
                    class="col-2 d-flex justify-content-start align-items-end"
                  ></div>
                  <div
                    class="col-10 d-flex justify-content-end align-items-center"
                  >
                    <div class="Cms-User-count-container pt-1">
                      <div
                        class="row w-100"
                        *ngFor="let response of count; let i = index"
                        (click)="changeFilter(i)"
                      >
                        <div class="col-lg-5 col-sm-4 ps-4 font count_label">
                          {{ response.label }}
                        </div>
                        <div class="col-lg-5 col-sm-6">
                          <div
                            class="count-points text-light font d-flex justify-content-center align-items-center mt-1"
                          >
                            {{ response.value }}
                          </div>
                        </div>
                        <div class="col-lg-2 col-sm-2">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="flexRadioDefault"
                            id="flexRadioDefault2"
                            [checked]="i === activeRadiobutton"
                          />
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row display-Cms-User-body">
                  <div class="col-12">
                    <div class="row">
                      <div class="col-12">
                        <div class="row mt-2">
                          <div class="col-12">
                            <div class="table-header">
                              <div
                                class="checkbox-header d-flex align-items-center"
                              >
                                <div
                                  class="edit_btn d-flex justify-content-center align-items-center"
                                ></div>
                                <div class="checkbox">
                                  <div
                                    class="form-check d-flex align-items-center"
                                  ></div>
                                </div>
                                <div
                                  class="font d-flex align-items-center justify-content-center text-light"
                                >
                                  Status
                                </div>
                                <div
                                  class="User-Name-header font d-flex justify-content-start ps-4 text-light"
                                >
                                  User-Name
                                </div>

                                <div
                                  class="Organization-header font d-flex justify-content-start ps-4 text-light"
                                >
                                  Organization
                                </div>

                                <div class="Role-header font text-light">
                                  Role
                                </div>

                                <div class="Function-header font text-light">
                                  Function
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="display-Cms-User-body-height">
                            <div
                              class="table-body-height table-body w-100"
                              *ngFor="
                                let item of userDetailsList;
                                let i = index
                              "
                            >
                              <div class="row mt-2">
                                <div
                                  class="col-12 d-flex justify-content-center"
                                >
                                  <div
                                    class="table-body d-flex align-items-center"
                                  >
                                    <div
                                      class="view_div d-flex align-items-center justify-content-center"
                                      data-bs-toggle="modal"
                                      data-bs-target="#UserDescriptionModal"
                                      (click)="viewUserinfo(i)"
                                    >
                                      <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="eye-image"
                                        viewBox="0 0 28 20"
                                        fill="none"
                                      >
                                        <path
                                          d="M1.82837 10C1.82837 10 6.32471 1 14.1933 1C22.0619 1 26.5582 10 26.5582 10C26.5582 10 22.0619 19 14.1933 19C6.32471 19 1.82837 10 1.82837 10Z"
                                          stroke="#133870"
                                          stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"
                                        />
                                        <path
                                          d="M14.1933 13.375C16.0557 13.375 17.5656 11.864 17.5656 10C17.5656 8.13604 16.0557 6.625 14.1933 6.625C12.3309 6.625 10.821 8.13604 10.821 10C10.821 11.864 12.3309 13.375 14.1933 13.375Z"
                                          stroke="#000"
                                          stroke-width="2"
                                          stroke-linecap="round"
                                          stroke-linejoin="round"
                                        />
                                      </svg>
                                    </div>
                                    <div
                                      class="edit_btn d-flex justify-content-center align-items-center"
                                      (click)="editCmsUSer(i)"
                                    >
                                      <img
                                        class="edit_image"
                                        src="assets/images/Edit.svg"
                                        alt="Edit Image"
                                      />
                                    </div>

                                    <div
                                      class="Status_label form-check form-switch d-flex align-items-center"
                                    >
                                      <input
                                        class="form-check-input"
                                        style="width: 2.5vw; height: 2.5vh"
                                        type="checkbox"
                                        role="switch"
                                        id="flexSwitchCheckDefault"
                                        [checked]="item.status === 'A'"
                                      />
                                    </div>
                                    <div
                                      class="User-Name-header font text-dark ps-4 ellipsis"
                                    >
                                      {{ item.name }}
                                    </div>
                                    <div
                                      class="Organization-header font text-dark ps-4"
                                    >
                                      {{ item.organizationName }}
                                    </div>
                                    <div
                                      class="Role-header font text-dark ps-2"
                                    >
                                      {{ item.roleName }}
                                    </div>
                                    <div
                                      class="Function-header ellipsis font text-dark ps-2"
                                    >
                                      {{ item.functions }}
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12 d-flex justify-content-end" *ngIf="activeIndexSubTab == 0">
    <div *ngIf="!EditButton; then noneditable; else editable"></div>
    <ng-template #noneditable>
      <div
        class="submit_button_function mt-3 me-3 font d-flex justify-content-center fontInter"
        [ngClass]="{ disabled: isDisabledCreateUser }"
        [ngClass]="{ 'disabled-button': createCmsUser.invalid }"
        (click)="createCmsUserOnSubmit()"
      >
        Create
      </div>
    </ng-template>

    <ng-template #editable>
      <div
        class="submit_button_function mt-3 me-3 font d-flex justify-content-center fontInter"
        (click)="createCmsUserOnSubmit()"
      >
        Update
      </div>
    </ng-template>
  </div>
</div>
<div
  class="modal fade"
  id="UserDescriptionModal"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="staticBackdropLabel"
  aria-hidden="true"
>
  <div
    class="modal-dialog modal-dialog-centered"
    style="position: relative; display: flex; justify-content: center"
  >
    <div class="modal-content UserDescriptionModal">
      <div class="d-flex justify-content-end">
        <div
          type="button"
          class="custom-close-btn d-flex justify-content-center align-items-center m-2"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <svg
            viewBox="0 0 36 36"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="cross-icon"
          >
            <g id="Group 8373">
              <circle
                id="Ellipse 21"
                cx="18"
                cy="18"
                r="17"
                fill="#D7D7E8"
                stroke="black"
                stroke-width="2"
              />
              <path
                id="Vector 3983"
                d="M9.5 10L28 27"
                stroke="black"
                stroke-width="5"
              />
              <path
                id="Vector 3984"
                d="M27.25 9.25L10.25 27.75"
                stroke="black"
                stroke-width="5"
              />
            </g>
          </svg>
        </div>
      </div>
      <div class="modal-body pt-0">
        <div class="row">
          <div class="col-12">
            <div class="label_setup-logo font text-dark">User Name:</div>
            <div class="mt-2">
              <input
                class="form-control organisation_input font"
                type="text"
                value="{{ username }}"
              />
            </div>
          </div>
          <div class="col-12">
            <div class="label_setup-logo font text-dark">Organization:</div>
            <div class="mt-2">
              <input
                class="form-control organisation_input font"
                type="text"
                value="TGC"
              />
            </div>
          </div>
          <div class="col-12">
            <div class="label_setup-logo font text-dark">Role:</div>
            <div class="mt-2">
              <input
                class="form-control organisation_input font"
                type="text"
                value="Admin Access"
              />
            </div>
          </div>
          <div class="col-12 mt-2">
            <div class="label_setup-logo font">Function:</div>
            <div class="question-container mt-2 font">
              <textarea
                class="form-control input-question"
                rows="7"
                value="{{ function }}"
              ></textarea>
              <!-- Question -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
